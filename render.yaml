
  version: 1

services:
  - type: web
    name: elsip-web-dev
    env: node
    region: oregon
    plan: starter
    branch: dev
    repo: https://github.com/nib99/ELSIP_DIGITAL.git
    rootDir: .
    buildCommand: npm install && npx prisma generate && npm run build
    startCommand: npx next start -p 10000
    autoDeploy: true
    envVars:
      
        value: development
      DATABASE_URL:
        fromDatabase:
          name: elsip-db-dev
          property: connectionString
      JWT_SECRET:
        sync: false

  - type: web
    name: elsip-web-prod
    env: node
    region: oregon
    plan: standard
    branch: main
    repo: https://github.com/nib99/ELSIP_DIGITAL.git
    rootDir: .
    buildCommand: npm install && npx prisma generate && npm run build
    startCommand: npx next start -p 10000
    autoDeploy: true
    envVars:
      
        value: production
      DATABASE_URL:
        fromDatabase:
          name: elsip-db-prod
          property: connectionString
      JWT_SECRET:
        sync: false

databases:
  - name: elsip-db-dev
    region: oregon
    plan: starter

  - name: elsip-db-prod
    region: oregon
    plan: standard
